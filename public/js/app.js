(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){n(14),e.exports=n(41)},14:function(e,t,n){"use strict";n.r(t);n(32);window.axios=n(15),window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var s=document.head.querySelector('meta[name="csrf-token"]');s&&(window.axios.defaults.headers.common["X-CSRF-TOKEN"]=s.content),window.Vue=n(33),Vue.component("record-attendance",n(38).default),Vue.component("video-player",n(39).default),Vue.component("stream-controller",n(40).default);new Vue({el:"#videoplayer"}),new Vue({el:"#attendance"})},38:function(e,t,n){"use strict";n.r(t);var s={data:function(){return{available:[],selected:[],showAttendancePad:!1,message:"",showButtons:!1}},created:function(){var e=this;fetch("/user/family").then((function(e){return e.json()})).then((function(t){e.available=t,e.showButtons=!0}))},methods:{clickCheckInButton:function(){this.available.length?this.showAttendancePad=!0:this.message="Already checked in!"},checkIn:function(e){axios.post("/check-in",e).then(console.log)},select:function(e){var t=this;this.selected.push(e),axios.post("/check-in",e).then((function(){t.available=t.available.filter((function(t){return t!==e}))}))}}},a=n(1),o=Object(a.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},[n("div",{staticClass:"relative mt-4"},[n("transition",{attrs:{"enter-active-class":"transition ease-in duration-100","enter-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-out duration-75","leave-class":"opacity-100","leave-to-class":"opacity-0",mode:"out-in"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.available.length&&e.showAttendancePad,expression:"available.length && showAttendancePad"}]},[n("div",{staticClass:"mx-4 sm:mx-6 text-base text-center leading-6 font-medium"},[e._v("\n          Who is checking in?\n        ")]),e._v(" "),n("div",{staticClass:"flex flex-wrap items-center justify-center mx-4 sm:mx-6 space-x-2"},e._l(e.available,(function(t){return n("span",{key:t.id,staticClass:"inline-flex rounded-md shadow-sm"},[n("button",{staticClass:"mt-2 inline-flex items-center px-4 py-2 border text-sm leading-5 font-medium rounded-md transition ease-in-out duration-150",class:e.selected.includes(t)?"border-nl-green-300 text-nl-green-700 bg-nl-green-100 hover:bg-nl-green-50 focus:outline-none focus:border-nl-green-300 focus:shadow-outline-nl-green active:bg-nl-green-200":"border-gray-300 text-gray-700 bg-white hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:text-gray-800 active:bg-gray-50",attrs:{type:"button"},on:{click:function(n){return e.select(t)}}},[e._v("\n              "+e._s(t.name)+"\n            ")])])})),0)])]),e._v(" "),e.showButtons?n("div",{staticClass:"absolute top-0 right-0 flex rounded-md shadow-sm"},[n("transition",{attrs:{mode:"out-in"}},[e.available.length?n("div",[e.showAttendancePad?n("button",{staticClass:"inline-flex items-center px-4 py-2 border text-sm leading-5 font-medium rounded-md transition ease-in-out duration-150 border-gray-300 text-gray-700 bg-white hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:text-gray-800 active:bg-gray-50",attrs:{type:"button"},on:{click:function(t){e.showAttendancePad=!1}}},[e._v("\n            Close\n          ")]):n("button",{staticClass:"inline-flex items-center px-4 py-2 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-nl-blue-600 hover:bg-nl-blue-500 focus:outline-none focus:border-nl-blue-700 focus:shadow-outline-nl-blue active:bg-nl-blue-700 transition ease-in-out duration-150",attrs:{type:"button"},on:{click:function(t){e.showAttendancePad=!0}}},[e._v("\n            Check In\n          ")])]):e._e()])],1):e._e()],1)])}),[],!1,null,null,null);t.default=o.exports},39:function(e,t,n){"use strict";n.r(t);var s=n(12),a=n.n(s),o={props:{sermon:{type:Object,required:!0},control:{type:Boolean,required:!1,default:!1},mode:{type:String,required:!1,default:"live"}},data:function(){return{stream_started:this.sermon.stream_started,stream_ended:this.sermon.stream_ended,recording_done:this.sermon.recording_done}},computed:{fromNow:function(){return a()(this.sermon.scheduled_for).fromNow()},statusText:function(){return 0!==this.recording_done?"recorded":0!==this.stream_ended&&0===this.recording_done?"processing":0!==this.stream_started&&0===this.stream_ended?"streaming":"waiting"}},methods:{getStatus:function(){var e=this;fetch("/sermons/"+this.sermon.id+"/status").then((function(e){return e.json()})).then((function(t){e.stream_started=t.stream_started,e.stream_ended=t.stream_ended,e.recording_done=t.recording_done,"waiting"!==e.statusText&&"processing"!==e.statusText||setTimeout(e.getStatus,1e4)}))}},created:function(){"preview"!==this.mode&&this.getStatus()}},i=n(1),r=Object(i.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",["waiting"===e.statusText&&"live"===e.mode?n("div",{class:{"flex flex-col-reverse":e.control}},[n("p",{staticClass:"px-4 sm:px-0",class:{"mt-4":e.control}},[e._v("\n      The stream will begin about "+e._s(e.fromNow)+".  Please prepare your hearts for worship.\n    ")]),e._v(" "),n("img",{staticClass:"w-full shadow-md max-w-3xl",class:{"mt-4":!e.control},attrs:{src:"https://cdn.newlifeglenside.com/nlg-logo-white.png",alt:"New Life logo"}})]):e._e(),e._v(" "),"streaming"===e.statusText||"preview"===e.mode||"recorded"===e.statusText?n("video-js",{staticClass:"video-js vjs-big-play-centered h-full shadow-md",attrs:{controls:"",autoplay:"",preload:"none","data-setup":'{ "liveui": true }'}},["streaming"===e.statusText||"preview"===e.mode?n("source",{attrs:{src:"https://stream.newlifeglenside.com/hls/"+e.sermon.stream_key+".m3u8",type:"application/vnd.apple.mpegurl"}}):n("source",{attrs:{src:"https://stream.newlifeglenside.com/recordings/"+e.sermon.stream_key+".mp4",type:"video/mp4"}}),e._v(" "),n("p",{staticClass:"vjs-no-js"},[e._v("To watch this video, please enable Javascript or use a browser that supports HTML5 video.")])]):e._e(),e._v(" "),"processing"===e.statusText?n("div",{},[n("p",{staticClass:"px-4 sm:px-0"},[e._v("\n      The stream has ended.  Please check back later when the video is done processing.\n    ")]),e._v(" "),n("img",{staticClass:"mt-4 w-full shadow-md max-w-3xl",attrs:{src:"https://cdn.newlifeglenside.com/nlg-logo-white.png",alt:"New Life logo"}})]):e._e(),e._v(" "),e.control?e._e():n("div",{staticClass:"mt-4 mx-4 sm:mx-0"},[n("h2",{staticClass:"text-lg font-bold leading-tight text-gray-900"},[e._v(e._s(e.sermon.name))]),e._v(" "),e.description?n("div",{staticClass:"text-base text-gray-900"},[e._v("\n      "+e._s(e.sermon.description)+"\n    ")]):e._e()])],1)}),[],!1,null,null,null);t.default=r.exports},40:function(e,t,n){"use strict";n.r(t);var s={props:{sermon:{type:Object,required:!0}},data:function(){return{stream_started:!1}},methods:{goLive:function(){var e=this;axios.post("/admin/sermons/"+this.sermon.id+"/status",{stream_started:!0}).then((function(e){return e.json()})).then((function(t){e.stream_started=t.stream_started}))}}},a=n(1),o=Object(a.a)(s,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"text-right"},[t("span",{staticClass:"inline-flex rounded-md shadow-sm"},[t("button",{staticClass:"inline-flex items-center px-4 py-2 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition ease-in-out duration-150",attrs:{type:"button",disabled:this.stream_started},on:{click:this.goLive}},[this._v("\n      Go Live\n    ")])])])}),[],!1,null,null,null);t.default=o.exports},41:function(e,t){}},[[13,1,2]]]);